<div id="titleScreen">
    <img src="rogo.png" alt="POTRABASH" class="title-logo">
    <div class="menu">
        <p style="font-size: 18px; margin-bottom: 20px;">Nightmare Mode (Original Art)</p>
        <select id="playerCount" style="font-size: 20px; padding: 5px; margin-bottom: 30px;">
            <option value="3">3人</option>
            <option value="4" selected>4人</option>
            <option value="5">5人</option>
        </select><br>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button class="btn-large" onclick="initGame()">Game Start</button>
            <button class="btn-large" style="background:#3498db; color:white;" onclick="showRules()">Rules</button>
        </div>
    </div>
</div>

<div id="ruleModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2000; overflow-y:auto; padding:40px 20px;">
    <div style="max-width:800px; margin:auto; background:#1a1a1a; padding:30px; border-radius:20px; border:2px solid #ffd700; color:white; line-height:1.6;">
        <h2 style="color:#ffd700; text-align:center; border-bottom:2px solid #ffd700; padding-bottom:10px;">POTRABASH ルール解説</h2>
        
        <div style="margin-top:20px;">
            <h3 style="color:#f1c40f;">1. 贈与パート (Gift Phase)</h3>
            <p>中央に公開された1枚のカードを奪い合います。手札からカードを出し、合計値が最も高いプレイヤーが中央のカードを獲得します。</p>
            <ul>
                <li><b>1周目：</b>全員必ず1枚出します。</li>
                <li><b>2・3周目：</b>さらにカードを出すか「パス」を選択できます。</li>
                <li><b>同点の場合：</b>後から出した人（後攻）が優先されます。</li>
            </ul>
        </div>

        <div style="margin-top:20px;">
            <h3 style="color:#f1c40f;">2. 獲得パート (Acquisition Phase)</h3>
            <p>中央カードを獲得したプレイヤーから時計回りに、<b>「他人の場に出されたカード」</b>を1枚ずつ奪って自分のスコアにします。</p>
        </div>

        <div style="margin-top:20px;">
            <h3 style="color:#f1c40f;">3. スコアと相殺ルール</h3>
            <p>ゲーム終了時、獲得したカードの合計がスコアになります。</p>
            <ul>
                <li><b>3枚で消滅：</b>同じ数字のカードが3枚揃うと、その3枚は消滅（0点）します。マイナス札を消すチャンスです！</li>
                <li><b style="color:#ff4444; font-size:1.2em;">【重要】1のカード：</b> 1は3枚揃っても<b>絶対に消滅しません。</b></li>
                <li><b>タイブレーク：</b>合計点が同点の場合、<b>「1」を多く持っているプレイヤー</b>が勝利します。</li>
            </ul>
        </div>

        <button class="btn-large" style="display:block; margin:30px auto 0;" onclick="closeRules()">閉じる</button>
    </div>
</div>

<script>
// --- 追加のスクリプト関数 ---
function showRules() { document.getElementById('ruleModal').style.display = 'block'; }
function closeRules() { document.getElementById('ruleModal').style.display = 'none'; }
// 既存のinitGame等はそのまま...
</script>